{"version":3,"sources":["webpack:///webpack/bootstrap 2f3a8c47660b2181bf66","webpack:///./src/js/services/API.js","webpack:///./src/js/services/DataStore.js","webpack:///./src/js/services/CustomEvent.js","webpack:///./src/js/ClearPreviews.js","webpack:///./src/js/PinPreview.js","webpack:///./src/js/services/Analytics.js","webpack:///./src/js/views/Application.js","webpack:///./src/js/main.js","webpack:///./~/bullet-pubsub/dist/bullet.js","webpack:///./~/debounce/index.js","webpack:///./~/mousetrap/mousetrap.js","webpack:///./~/packing-ajax/index.js","webpack:///./~/type-of/index.js","webpack:///./src/js/services/AJAX.js","webpack:///./src/js/services/ErrorUtil.js","webpack:///./src/js/views/Authorization.js"],"names":["API","Get","DATA__ACCESS_TOKEN","Promise","resolve","reject","PDK","init","appId","cookie","login","scope","session","setSession","Post","data","then","catch","access_token","sort","a","b","nameA","name","toUpperCase","nameB","DataStore","key","value","window","localStorage","setItem","getItem","removeItem","CustomEvent","eventName","callback","on","off","once","trigger","ClearPreviews","clearButton","document","querySelector","clearAllButton","attachListeners","addEventListener","clearCompleted","clearAll","completedPins","querySelectorAll","clear","previewPins","elements","i","length","remove","classList","toggle","innerText","resetSendAllToBoard","ToggleActionMenu","PinPreview","file","split","pop","join","instance","actionMenuTrigger","actionMenu","note","link","isActionMenuVisible","showPreviewActions","hidePreviewActions","e","target","dataset","action","setNote","add","contains","template","getElementById","importNode","content","reader","FileReader","onload","previewContainer","theFile","previewImage","src","result","abort","readAsDataURL","imageData","board","pinError","CreatePin","image_base64","pinned","PinCreated","Log","Error","error","err","severity","exception","Analytics","FireEvent","shortcutName","featureName","eventAction","eventOptions","DATA__IS_ADMIN","gtag","Application","clearPreviews","previewsPinsContainer","imageSelectContainer","refreshBoardsButton","pinsContainer","sendToPinterestButton","sendAllToBoardSelect","fileUploadInput","modalOverlay","pinPreviews","showApplicationContainer","createKeyboardShortcuts","loadBoards","populateBoardNames","boards","console","response","FeatureUsed","matches","forEach","pinPreview","validateInputs","createPins","boardValue","updateSelectedBoards","onchange","createPinPreviews","showPrivacyPolicy","hidePrivacyPolicy","hideKeyboardShortcuts","updateStickyPin","stopImmediatePropagation","Remove","DATA__BOARDS","location","reload","bind","click","KeyboardShortcutUsed","autofillFields","showKeyboardShortcuts","input","files","setTimeout","scrollOffset","windowBreakpoint","Math","abs","getBoundingClientRect","top","appendChild","render","setInstance","push","forceLoad","JSON","parse","Boards","Set","stringify","boardNames","innerHTML","option","createBoardNameOptionElement","id","existingBoardNameSelectors","select","createElement","newBoard","boardNameSelectors","boardNameSelect","previews","tabIndex","preview","noteContainer","focus","balloon","tooltip","removeAttribute","createPin","noteField","linkField","setLink","pageYOffset","show","undefined","actionButtons","navigator","userAgent","indexOf","match","IsAuthenticated","origin","Bugsnag","releaseStage","notifyReleaseStages","Bullet","ParamCountError","methodName","expectedParamsString","paramCount","message","stack","prototype","constructor","ParamTypeError","parameterName","parameter","expectedType","TypeError","EventNameLengthError","EventNamesArrayLengthError","UndeclaredEventError","UnmappedEventError","_CALLBACK_NAMESPACE","_self","_mappings","_strictMode","_triggerAsync","_errors","events","_runCallback","callbacks","callbackObject","cb","_cloneCallbacks","clonedCallbacks","callbackName","_deleteAllCallbackReferencesForEvent","totalEvents","_deleteAllCallbackReferences","_getMappings","clonedMappings","mapping","totalCallbacks","fn","arguments","callbackId","fnToRemove","replaceCallback","oldFn","newFn","replaceAllCallbacks","addEventName","addMultipleEventNames","eventNames","Array","currentEventName","removeEventName","getStrictMode","setStrictMode","useStrictMode","getTriggerAsync","setTriggerAsync","useAsync","define","module","exports","debounce","func","wait","immediate","timeout","args","context","timestamp","later","last","Date","now","apply","debounced","callNow","clearTimeout","flush","_MAP","_KEYCODE_MAP","_SHIFT_MAP","_SPECIAL_ALIASES","test","platform","_REVERSE_MAP","toString","_addEvent","object","type","attachEvent","_characterFromEvent","character","String","fromCharCode","which","shiftKey","toLowerCase","_modifiersMatch","modifiers1","modifiers2","_eventModifiers","modifiers","altKey","ctrlKey","metaKey","_preventDefault","preventDefault","returnValue","_stopPropagation","stopPropagation","cancelBubble","_isModifier","_getReverseMap","hasOwnProperty","_pickBestAction","_keysFromString","combination","replace","_getKeyInfo","keys","_belongsTo","element","ancestor","parentNode","Mousetrap","targetElement","self","_callbacks","_directMap","_sequenceLevels","_resetTimer","_ignoreNextKeyup","_ignoreNextKeypress","_nextExpectedAction","_resetSequences","doNotReset","activeSequences","_getMatches","sequenceName","level","seq","deleteCombo","combo","deleteSequence","splice","_fireCallback","sequence","stopCallback","srcElement","_handleKey","maxLevel","processedSequenceCallback","max","ignoreThisKeypress","_handleKeyEvent","keyCode","handleKey","_resetSequenceTimer","_bindSequence","_increaseSequence","nextAction","_callbackAndReset","isFinal","wrappedCallback","_bindSingle","info","_bindMultiple","combinations","call","unbind","reset","className","tagName","isContentEditable","addKeycodes","documentMousetrap","method","charAt","require","jsonpID","rscript","scriptTypeRE","xmlTypeRE","jsonType","htmlType","blankRE","ajax","options","settings","extend","ajaxStart","crossDomain","url","RegExp","$2","host","dataType","hasPlaceholder","appendQuery","JSONP","serializeData","mime","accepts","baseHeaders","protocol","$1","xhr","abortTimeout","overrideMimeType","contentType","headers","onreadystatechange","readyState","status","mimeToDataType","getResponseHeader","responseText","eval","responseXML","ajaxError","ajaxSuccess","async","open","setRequestHeader","ajaxBeforeSend","empty","send","triggerAndReturn","triggerGlobal","global","active","ajaxStop","beforeSend","success","ajaxComplete","complete","script","head","getElementsByTagName","documentElement","onerror","insertBefore","firstChild","XMLHttpRequest","json","xml","html","text","query","param","get","post","getJSON","escape","encodeURIComponent","serialize","params","obj","traditional","array","k","v","slice","source","Object","val","callee","ex","nodeType","AJAX","baseUrl","apiVersion","endpoint","_buildUrl","_fetch","ErrorUtil","notifyException","Authorization","authenticationContainer","authenticationButton","showAuthenticationContainer","Login","accessToken","hideAuthenticationContainer"],"mappings":"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","file":"scripts.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2f3a8c47660b2181bf66","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\r\n * Copyright (C) 2017 Luke Denton\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU General Public License as published by\r\n * the Free Software Foundation; either version 3 of the License, or\r\n * (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\nimport AJAX from 'services/AJAX';\r\nimport DataStore from 'services/DataStore';\r\n\r\n/**\r\n * Class API\r\n *\r\n * Interface for communicating with the API\r\n */\r\nexport default class API {\r\n\r\n    /**\r\n     * Check if a user has authenticated the application. I.e. an access token exists\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    static IsAuthenticated() {\r\n        return DataStore.Get(DataStore.DATA__ACCESS_TOKEN()) !== null;\r\n    }\r\n\r\n    /**\r\n     * Initialise the Pinterest SDK and call the login function to get an access token\r\n     * Access token information will be set in the Pinterest SDK, however at the moment\r\n     * the SDK is only used here\r\n     *\r\n     * @returns {Promise}\r\n     */\r\n    static Login() {\r\n        return new Promise((resolve, reject) => {\r\n            PDK.init({\r\n                appId: \"4927694653406329461\", // Change this\r\n                cookie: true\r\n            });\r\n            PDK.login({scope: 'read_public, write_public'}, ({session}) => {\r\n                PDK.setSession(session);\r\n                resolve(session);\r\n            })\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get cursor of users' Pins\r\n     *\r\n     * @returns {Promise}\r\n     */\r\n    static Pins() {\r\n        return new Promise((resolve, reject) => {\r\n            AJAX.Post('me/pins/', data)\r\n                .then(resolve)\r\n                .catch(reject);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get list of users boards\r\n     *\r\n     * @returns {Promise}\r\n     */\r\n    static Boards() {\r\n        return new Promise((resolve, reject) => {\r\n            AJAX.Get('me/boards/', {\r\n                access_token: DataStore.Get(DataStore.DATA__ACCESS_TOKEN())\r\n            }, true)\r\n                .then(({data}) => {\r\n                    data.sort((a, b) => {\r\n                        let nameA = a.name.toUpperCase();\r\n                        let nameB = b.name.toUpperCase();\r\n                        if (nameA < nameB) {\r\n                            return -1;\r\n                        }\r\n                        if (nameA > nameB) {\r\n                            return 1;\r\n                        }\r\n                        return 0;\r\n                    });\r\n\r\n                    resolve(data);\r\n                })\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Send request to Pinterest API to create a new pin\r\n     *\r\n     * @param {Object} data The data to create the pin with\r\n     *\r\n     * @returns {Promise}\r\n     */\r\n    static CreatePin(data) {\r\n        return new Promise((resolve, reject) => {\r\n            AJAX.Post('pins/', {\r\n                access_token: DataStore.Get(DataStore.DATA__ACCESS_TOKEN()),\r\n                ...data\r\n            })\r\n            .then(resolve)\r\n            .catch(reject);\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/services/API.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\n * Copyright (C) 2017 Luke Denton\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * Class API\n *\n * Interface for communicating with the API\n */\nexport default class DataStore {\n\n    /**\n     * String constant for access token key\n     *\n     * @returns {string}\n     */\n    static DATA__ACCESS_TOKEN() {\n        return 'pinterest_accessToken';\n    }\n\n    static DATA__BOARDS() {\n        return 'pinterest_boards';\n    }\n\n    static DATA__IS_ADMIN() {\n        return 'bulk_pinner_admin';\n    }\n\n    /**\n     * Set value in the data store\n     *\n     * @param {string} key   The identifying key for the value\n     * @param {string} value The value for the identifying key\n     *\n     * @returns {null}\n     */\n    static Set(key, value) {\n        window.localStorage.setItem(key, value);\n    }\n\n    /**\n     * Get the value for a given key\n     *\n     * @param {string} key The identifying key for the value\n     *\n     * @returns {string}\n     */\n    static Get(key) {\n        return window.localStorage.getItem(key);\n    }\n\n    /**\n     * Remove a local storage key/value\n     *\n     * @param {string} key The identifying key to remove\n     *\n     * @returns {null}\n     */\n    static Remove(key) {\n        return window.localStorage.removeItem(key);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/services/DataStore.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\n * Copyright (C) 2017 Luke Denton\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Bullet from 'bullet-pubsub';\n\n/**\n * Class Event\n *\n * Wrapper for the event library chosen, preventing the application from being tightly coupled to the library\n *\n * This class will only be used for custom events. Events like click, hover etc will be handled by vanilla JS handlers\n */\nexport default class CustomEvent {\n\n    /**\n     * Wrapper for the .on event listener\n     *\n     * @param {string}   eventName The name of the event to listen for\n     * @param {function} callback  The function to execute when the event is detected\n     *\n     * @returns {null}\n     */\n    static on(eventName, callback) {\n        Bullet.on(eventName, callback, false);\n    }\n\n    /**\n     * Wrapper for the .off function\n     *\n     * @param {string}   eventName The name of the event to remove\n     * @param {function} callback  [Optional] The function to remove. If the event listener needs to remain for some instances.\n     *\n     * @returns {null}\n     */\n    static off(eventName, callback) {\n        Bullet.off(eventName, callback);\n    }\n\n    /**\n     * Wrapper for the .once event listener.\n     * This listener will only be triggered once, and then removed\n     *\n     * @param {string}   eventName The name of the event to listen for\n     * @param {function} callback  The function to execute when event is detected\n     *\n     * @returns {null}\n     */\n    static once(eventName, callback) {\n        Bullet.once(eventName, callback);\n    }\n\n    /**\n     * Wrapper for the .trigger function, that will trigger an event\n     *\n     * @param {string} eventName The name of the event to trigger\n     * @param {Object} data      [Optional] Custom data to pass to the event listener callback\n     *\n     * @returns {null}\n     */\n    static trigger(eventName, data = {}) {\n        Bullet.trigger(eventName, data)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/services/CustomEvent.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\n * Copyright (C) 2017 Luke Denton\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Application from 'views/Application';\n\n/**\n * Class API\n *\n * Interface for communicating with the API\n */\nexport default class ClearPreviews {\n\n    constructor() {\n        this.clearButton    = document.querySelector(\".clear-completed\");\n        this.clearAllButton = document.querySelector(\".clear-all\");\n\n        this.attachListeners();\n    }\n\n    /**\n     * Attach listeners to the clear buttons\n     *\n     * @returns {null}\n     */\n    attachListeners() {\n        this.clearButton.addEventListener('click', e => {\n            this.clearCompleted();\n        });\n\n        this.clearAllButton.addEventListener('click', e => {\n            this.clearAll();\n        });\n    }\n\n    /**\n     * Clear preview pins that have been uploaded to pinterest\n     *\n     * @returns {null}\n     */\n    clearCompleted() {\n        const completedPins = document.querySelectorAll(\".preview-container[data-pinned='true']\");\n        this.clear(completedPins);\n    }\n\n    /**\n     * Clear all preview pins\n     *\n     * @returns {null}\n     */\n    clearAll() {\n        const previewPins = document.querySelectorAll(\".preview-container\");\n        this.clear(previewPins);\n    }\n\n    /**\n     * Remove elements from the DOM\n     *\n     * @param {NodeList} elements Array of elements to remove\n     */\n    clear(elements) {\n        for (let i = 0 ; i < elements.length ; i++) {\n            elements[i].remove();\n        }\n\n        if (document.querySelectorAll(\".preview-container\").length === 0) {\n            document.querySelector('.page-header').classList.toggle('large', true);\n            document.querySelector('.get-started').classList.toggle('hidden', false);\n            document.querySelector('.application-container').classList.toggle('expanded', false);\n            document.querySelector('.label-text').innerText = 'Choose Images';\n            document.querySelector('.preview-pins-container').classList.toggle('hidden', true);\n        }\n\n        this.resetSendAllToBoard();\n        Application.ToggleActionMenu(false);\n    }\n\n    /**\n     * Reset the selected value in the Send all to board drop down\n     *\n     * @returns {null}\n     */\n    resetSendAllToBoard() {\n        document.querySelector(\"#send-all-to-board\").value = \"\";\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/ClearPreviews.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\r\n * Copyright (C) 2017 Luke Denton\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU General Public License as published by\r\n * the Free Software Foundation; either version 3 of the License, or\r\n * (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\n\r\nimport ErrorUtil from 'services/ErrorUtil';\r\nimport Analytics from 'services/Analytics';\r\nimport API from 'services/API';\r\n\r\n/**\r\n * Class PinPreview\r\n */\r\nexport default class PinPreview {\r\n\r\n    constructor(file) {\r\n        this.file = file;\r\n\r\n        let name = this.file.name.split('.');\r\n        // Remove the extension from the filename array\r\n        name.pop();\r\n        // Re-join the remaining elements in the filename array, in case the filename itself had other fullstops in it\r\n        this.name = name.join('.');\r\n    }\r\n\r\n    /**\r\n     * Save the instance of the pin preview element that has been imported into the DOM\r\n     *\r\n     * @param instance\r\n     *\r\n     * @returns {PinPreview}\r\n     */\r\n    setInstance(instance) {\r\n        this.instance          = instance;\r\n        this.actionMenuTrigger = this.instance.querySelector('.preview-action-btn');\r\n        this.actionMenu        = this.instance.querySelector('.preview-actions');\r\n        this.note              = this.instance.querySelector('#note');\r\n        this.link              = this.instance.querySelector('.link');\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Attach event listeners to various elements in the Pin Preview\r\n     *\r\n     * @returns {null}\r\n     */\r\n    attachListeners() {\r\n\r\n        // Event listener to show/hide the actions menu\r\n        this.actionMenuTrigger.addEventListener('click', e => {\r\n            if (!this.isActionMenuVisible()) {\r\n                this.showPreviewActions();\r\n            } else {\r\n                this.hidePreviewActions();\r\n            }\r\n        });\r\n\r\n        // Event listener to populate the note with the name of the file being pinned\r\n        this.actionMenu.querySelector('.preview-action').addEventListener('click', e => {\r\n            switch (e.target.dataset.action) {\r\n                case 'filename':\r\n                    this.setNote(this.name);\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Show the preview actions menu for the current Pin Preview\r\n     *\r\n     * @returns {null}\r\n     */\r\n    showPreviewActions() {\r\n        this.actionMenu.classList.add('is-visible');\r\n    }\r\n\r\n    /**\r\n     * Hide the preview actions menu for the current Pin Preview\r\n     *\r\n     * @returns {null}\r\n     */\r\n    hidePreviewActions() {\r\n        this.actionMenu.classList.remove('is-visible');\r\n    }\r\n\r\n    /**\r\n     * Determine if the action menu for this PinPreview class is showing\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    isActionMenuVisible() {\r\n        return this.actionMenu.classList.contains('is-visible');\r\n    }\r\n\r\n    /**\r\n     * Set value for the note textarea\r\n     *\r\n     * @param {string} value The new value for the note\r\n     *\r\n     * @returns {null}\r\n     */\r\n    setNote(value) {\r\n        this.note.value = value;\r\n    }\r\n\r\n    /**\r\n     * Set value for link\r\n     *\r\n     * @param {string} link The value to be set for the link field\r\n     *\r\n     * @returns {null}\r\n     */\r\n    setLink(link) {\r\n        this.link.value = link;\r\n    }\r\n\r\n    /**\r\n     * Render a pin preview template instance\r\n     *\r\n     * @returns {Node}\r\n     */\r\n    render() {\r\n        const template = document.getElementById('preview-template');\r\n        const instance = document.importNode(template.content, true);\r\n\r\n        const reader = new FileReader();\r\n\r\n        reader.onload = (theFile => {\r\n            const previewContainer = theFile.querySelector('.preview-container');\r\n            const previewImage = previewContainer.querySelector(\".preview-image\");\r\n\r\n            return e => {\r\n                previewImage.src = e.target.result;\r\n                previewImage.classList.toggle('loaded', true);\r\n            };\r\n        })(instance);\r\n\r\n        reader.abort();\r\n        reader.readAsDataURL(this.file);\r\n\r\n        return instance;\r\n    }\r\n\r\n    /**\r\n     * Send request to Pinterest to pin this image\r\n     *\r\n     * @returns {null}\r\n     */\r\n    createPin() {\r\n        const imageData = this.instance.querySelector('.preview-image').src;\r\n        const note      = this.instance.querySelector(\".note\").value;\r\n        const board     = this.instance.querySelector(\".board-names\").value;\r\n        const link      = this.instance.querySelector(\".link\").value;\r\n\r\n        this.instance.classList.toggle('sending', true);\r\n        delete this.instance.dataset.pinError; // Remove any previous error that might be displaying\r\n\r\n        try {\r\n            API.CreatePin({\r\n                board: board, // Sending just the board ID. Documentation doesn't say this can be done, but it works. Reason is: spaces in board names\r\n                image_base64: imageData,\r\n                note: note,\r\n                link: link\r\n            })\r\n                .then(response => {\r\n                    this.instance.dataset.pinned = true;\r\n                    this.instance.classList.toggle('sending', false);\r\n                    Analytics.PinCreated();\r\n                })\r\n                .catch(err => {\r\n                    ErrorUtil.Log(new Error('Create Pin promise rejected'), {\r\n                        error: err,\r\n                        severity: 'error'\r\n                    });\r\n                });\r\n        } catch (exception) {\r\n            ErrorUtil.Log(new Error('Exception thrown from CreatePin function'), {\r\n                exception: exception,\r\n                severity: 'error'\r\n            });\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/PinPreview.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\r\n * Copyright (C) 2017 Luke Denton\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU General Public License as published by\r\n * the Free Software Foundation; either version 3 of the License, or\r\n * (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\n\r\nimport DataStore from 'services/DataStore';\r\n\r\n/**\r\n * Class Analytics\r\n */\r\nexport default class Analytics {\r\n\r\n    /**\r\n     * Perform analytics tracking actions relative to a pin being created\r\n     *\r\n     * @returns {null}\r\n     */\r\n    static PinCreated() {\r\n        Analytics.FireEvent('pin_created', {\r\n            'event_category': 'pins'\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Fire an event to help track which features are used\r\n     *\r\n     * @param {string} shortcutName The label of the shortcut that was used\r\n     *\r\n     * @returns {null}\r\n     */\r\n    static KeyboardShortcutUsed(shortcutName) {\r\n        Analytics.FireEvent(shortcutName, {\r\n            'event_category': 'keyboard_shortcuts'\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Fire an event to help track which features are used\r\n     *\r\n     * @param {string} featureName The label of the feature that was used\r\n     *\r\n     * @returns {null}\r\n     */\r\n    static FeatureUsed(featureName) {\r\n        Analytics.FireEvent(featureName, {\r\n            'event_category': 'features'\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Fire an event on Google Analytics\r\n     *\r\n     * @param {string} eventAction  The 'action' of the event to creation\r\n     * @param {Object} eventOptions Extra options to send with the event action\r\n     *\r\n     * @returns {null}\r\n     */\r\n    static FireEvent(eventAction, eventOptions) {\r\n        if (DataStore.Get(DataStore.DATA__IS_ADMIN) === null) {\r\n            gtag('event', eventAction, eventOptions);\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/services/Analytics.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\n * Copyright (C) 2017 Luke Denton\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport CustomEvent from 'services/CustomEvent';\nimport ClearPreviews from \"ClearPreviews\";\nimport API from 'services/API';\nimport DataStore from 'services/DataStore';\nimport PinPreview from 'PinPreview';\nimport Mousetrap from 'mousetrap';\nimport debounce from 'debounce';\nimport Analytics from 'services/Analytics';\n\n/**\n * Class Application\n */\nexport default class Application {\n\n    constructor() {\n        this.clearPreviews = new ClearPreviews();\n        this.previewsPinsContainer = document.querySelector('.preview-pins-container');\n        this.imageSelectContainer = document.querySelector(\".image-select-container\");\n        this.refreshBoardsButton = document.querySelector('.refresh-boards');\n        this.pinsContainer = document.querySelector('.pins-container');\n        this.sendToPinterestButton = document.querySelector('.send-to-pinterest');\n        this.sendAllToBoardSelect = document.getElementById('send-all-to-board');\n        this.fileUploadInput = document.getElementById(\"fileToUpload\");\n        this.modalOverlay = document.querySelector('.modal-overlay');\n        this.pinPreviews = [];\n\n        // Wait until the user is authenticated before showing the main application interface\n        CustomEvent.on('user-authenticated', () => {\n            this.init();\n        });\n    }\n\n    /**\n     * @returns {null}\n     */\n    init() {\n        this.showApplicationContainer();\n        this.attachListeners();\n        this.createKeyboardShortcuts();\n    }\n\n    /**\n     * @returns {null}\n     */\n    showApplicationContainer() {\n        this.imageSelectContainer.classList.toggle('hidden', false);\n    }\n\n    /**\n     * @returns {null}\n     */\n    hideApplicationContainer() {\n        this.imageSelectContainer.classList.toggle('hidden', true);\n    }\n\n    /**\n     * Attach event listeners\n     *\n     * @returns {null}\n     */\n    attachListeners() {\n        this.refreshBoardsButton.addEventListener('click', () => {\n            Application.ToggleActionMenu(false);\n            this.loadBoards(true)\n            .then(boards => {\n                this.populateBoardNames(boards);\n            })\n            .catch(response => {\n                console.error(response);\n            });\n            Analytics.FeatureUsed('refresh_boards');\n        });\n\n        this.pinsContainer.addEventListener('blur', e => {\n            if (e.target.matches('.note')) {\n                e.target.classList.toggle('invalid', e.target.value !== '');\n            }\n        });\n\n        // Event listener that will handle closing any open action menus\n        document.querySelector('body').addEventListener('click', (e) => {\n            this.pinPreviews.forEach(pinPreview => {\n                if (pinPreview.actionMenuTrigger !== e.target) {\n                    pinPreview.hidePreviewActions();\n                }\n            });\n            Application.ToggleActionMenu(false);\n        });\n\n        this.sendToPinterestButton.addEventListener('click', () => {\n            if (this.validateInputs()) {\n                this.createPins();\n            }\n        });\n\n        this.sendAllToBoardSelect.addEventListener('change', e => {\n            const boardValue = e.target.value;\n\n            if (boardValue !== '') {\n                this.updateSelectedBoards(boardValue);\n                Analytics.FeatureUsed('update_selected_boards');\n            }\n        });\n\n        this.fileUploadInput.onchange = e => this.createPinPreviews(e);\n\n        document.querySelector('.privacy-policy-link').addEventListener('click', e => {\n            this.showPrivacyPolicy();\n        });\n\n        document.querySelector('.modal-overlay').addEventListener('click', e => {\n            if (e.target.classList.contains('modal-overlay')) {\n                this.hidePrivacyPolicy();\n                this.hideKeyboardShortcuts();\n                return;\n            }\n\n            if (e.target.classList.contains('close')) {\n                this.hidePrivacyPolicy();\n                this.hideKeyboardShortcuts();\n            }\n        });\n\n        // Prepare the preview pin template with names of boards to pin to\n        this.loadBoards().then(boards => {\n            this.populateBoardNames(boards);\n        });\n\n        // Listen for scroll event to check for updating the sticky-ness of the Pin button\n        document.addEventListener('scroll', debounce(() => {\n            this.updateStickyPin();\n        }, 10, false));\n\n        document.querySelector('.action-menu-toggle').addEventListener('click', (e) => {\n            e.stopImmediatePropagation();\n            Application.ToggleActionMenu();\n        });\n\n        // @TODO This will need to be refactored - create an action menu class that will work for both the user actions and app actions\n        document.querySelector('.user-action-menu-toggle').addEventListener('click', e => {\n            document.querySelector('.user-actions-container').classList.toggle('show-menu');\n        });\n\n        document.querySelector('.user-action__disconnect').addEventListener('click', e => {\n            DataStore.Remove(DataStore.DATA__ACCESS_TOKEN());\n            DataStore.Remove(DataStore.DATA__BOARDS());\n            Analytics.FeatureUsed('disconnect_pinterest');\n            location.reload();\n        });\n    }\n\n    /**\n     * Assign application keyboard shortcuts\n     *\n     * @returns {null}\n     */\n    createKeyboardShortcuts() {\n        // Choose/Add more pictures to pin\n        Mousetrap.bind('a', () => {\n            document.getElementById('fileToUpload').click();\n            Analytics.KeyboardShortcutUsed('add_more');\n        });\n\n        // Clear all completed (pinned) images\n        Mousetrap.bind('p c', () => {\n            document.querySelector('.clear-completed.action-button').click();\n            Analytics.KeyboardShortcutUsed('clear_completed');\n        });\n\n        // Clean all images\n        Mousetrap.bind('p x', () => {\n            document.querySelector('.clear-all.action-button').click();\n            Analytics.KeyboardShortcutUsed('clear_all');\n        });\n\n        // Show privacy policy\n        Mousetrap.bind('p p', () => {\n            document.querySelector('.privacy-policy-link').click();\n            Analytics.KeyboardShortcutUsed('show_privacy_policy');\n        });\n\n        // Show privacy policy\n        Mousetrap.bind('esc', () => {\n            this.hideKeyboardShortcuts();\n            this.hidePrivacyPolicy();\n        });\n\n        // Autofill shortcut\n        Mousetrap.bind('> > >', () => {\n            this.autofillFields();\n            Analytics.KeyboardShortcutUsed('autofill_fields');\n        });\n\n        // Show keyboard shortcuts modal\n        Mousetrap.bind('?', () => {\n            this.showKeyboardShortcuts();\n            Analytics.KeyboardShortcutUsed('show_keyboard_shortcuts_modal');\n        });\n    }\n\n    /**\n     * Loop through the images selected and create instances of the Pin Preview class for each\n     *\n     * @param {Event} e The event object\n     *\n     * @returns {null}\n     */\n    createPinPreviews(e) {\n        const input = e.target;\n\n        if (input.files.length === 0) {\n            return;\n        }\n\n        document.querySelector('.page-header').classList.toggle('large', false);\n        document.querySelector('.get-started').classList.toggle('hidden', true);\n        document.querySelector('.application-container').classList.toggle('expanded', true);\n        document.querySelector('.label-text').innerText = 'Add More Images';\n        this.previewsPinsContainer.classList.toggle('hidden', false);\n\n        window.setTimeout(() => { // Allow time for the CSS animation to run before\n            // Set the breakpoint for the Pin button becoming sticky _after_ the header is back to it's small state\n            const scrollOffset = -20; // Padding changes from 30px top 10px, so that needs to be factored in\n            this.windowBreakpoint = Math.abs(document.querySelector('.action-toolbar').getBoundingClientRect().top - document.querySelector('body').getBoundingClientRect().top - scrollOffset);\n\n            for (let i = 0 ; i < input.files.length ; i++) {\n                let file = input.files[i];\n                let pinPreview = new PinPreview(file);\n                this.previewsPinsContainer.querySelector(\".pins-container\").appendChild(pinPreview.render());\n\n                // Grab the pin preview element that was just created and set it on the Pin Preview class\n                // Unable to use the returned value of appendChild, as it returns and empty DocumentFragment\n                let pinPreviews = this.previewsPinsContainer.querySelectorAll('.preview-container');\n                let instance = pinPreviews[(pinPreviews.length - 1)];\n                pinPreview.setInstance(instance);\n                pinPreview.attachListeners();\n\n                this.pinPreviews.push(pinPreview);\n            }\n        }, 300);\n    }\n\n    /**\n     * Load the users boards\n     *\n     * @param {Boolean} forceLoad [Optional] Indicates if the API should be queried regardless of DataStore\n     *\n     * @returns {Promise}\n     */\n    loadBoards(forceLoad = false) {\n        return new Promise((resolve, reject) => {\n            const boards = DataStore.Get(DataStore.DATA__BOARDS());\n            if (boards !== null && !forceLoad) {\n                resolve(JSON.parse(boards));\n                return;\n            }\n\n            API.Boards()\n            .then((boards) => {\n                DataStore.Set(DataStore.DATA__BOARDS(), JSON.stringify(boards));\n                resolve(boards);\n            })\n            .catch((response) => {\n                reject(response);\n            });\n        });\n    }\n\n    /**\n     * Populate the <select> of board names with the names returned from Pinterest API\n     *\n     * @param {Array} boards An array of board objects\n     *\n     * @return {null}\n     */\n    populateBoardNames(boards) {\n        const boardNames = document.getElementById('preview-template').content.querySelector(\".board-names\");\n        boardNames.innerHTML = ''; // Remove the 'Loading...' option\n\n        if (boards.length === 0) {\n            let option = this.createBoardNameOptionElement({id: '', name: `You don't have any Pinterest boards!`});\n            boardNames.appendChild(option);\n            document.querySelector(\".send-to-pinterest\").classList.toggle('hidden', true); // Can't send to pinterest as the user doesn't have any boards\n            return;\n        }\n\n        // The user may have seen the message above, gone to Pinterest to create a board, and then come back to click the Refresh Boards button\n        document.querySelector(\".send-to-pinterest\").classList.toggle('hidden', false);\n\n        for (let i = 0 ; i < boards.length ; i++) {\n            let board = boards[i];\n            let option = this.createBoardNameOptionElement(board);\n            boardNames.appendChild(option);\n        }\n\n        // Update any <select> elements in preview-containers that have already been activated from the template\n        const existingBoardNameSelectors = document.querySelectorAll('.board-names');\n        for (let i = 0 ; i < existingBoardNameSelectors.length ; i++) {\n            let select = existingBoardNameSelectors[i];\n            select.innerHTML = '';\n\n            // If the board being looped is the 'send all to board', need to add the blank option\n            if (select.id === 'send-all-to-board') {\n                let option = this.createBoardNameOptionElement({name: '---', id: ''});\n                select.appendChild(option);\n            }\n\n            for (let i = 0 ; i < boards.length ; i++) {\n                let board = boards[i];\n                let option = this.createBoardNameOptionElement(board);\n                select.appendChild(option);\n            }\n        }\n    }\n\n    /**\n     * Create a new <option> element for the provided board object\n     *\n     * @param {Object} board Object representing a Pinterest board\n     *\n     * @returns {Element}\n     */\n    createBoardNameOptionElement(board) {\n        const option = document.createElement('option');\n        option.value = board.id;\n        option.innerText = board.name;\n        return option;\n    }\n\n    /**\n     * Update the selected board in each of the pin previews to match the one selected in the\n     * Send all images to board drop down\n     *\n     * @param {int} newBoard The ID value of the board to be selected\n     */\n    updateSelectedBoards(newBoard) {\n        // Loop through all existing board name selectors and update their values to match the one just selected\n        const boardNameSelectors = document.querySelectorAll('.preview-pin-board-select');\n        for (let i = 0 ; i < boardNameSelectors.length ; i++) {\n            let boardNameSelect = boardNameSelectors[i];\n\n            boardNameSelect.value = newBoard;\n        }\n    }\n\n    /**\n     * Loop through all pin previews and make sure a note has been set\n     *\n     * If a required field isn't filled in, it will be marked as invalid, but also set up with tabIndexing,\n     * so that users can click tab to easily move between only the notes that aren't filled in yet\n     *\n     * @returns {Boolean}\n     */\n    validateInputs() {\n        const previews = document.querySelectorAll('.preview-container');\n        let error = false;\n        let tabIndex = 1;\n\n        for (let i = 0 ; i < previews.length ; i++) {\n            let preview = previews[i];\n\n            const noteContainer = preview.querySelector(\".note-container\");\n            const note = noteContainer.querySelector(\".note\").value;\n\n            if (note === '') {\n                let note = preview.querySelector('.note');\n                note.classList.toggle('invalid', true);\n                note.tabIndex = tabIndex;\n                if (tabIndex === 1) {\n                    note.focus();\n                    noteContainer.dataset.balloon = noteContainer.dataset.tooltip;\n\n                    // @todo: This needs to be cleaned up and removed from here. Also need to make sure it only triggers once\n                    note.addEventListener('blur', e => {\n                        noteContainer.removeAttribute('data-balloon');\n                    });\n                }\n                tabIndex++;\n                error = true;\n            }\n        }\n\n        return error === false;\n    }\n\n    /**\n     * Loop through all of the <img> elements, and call the API function to create a pin,\n     * with all the relevant information\n     *\n     * @returns {null}\n     */\n    createPins() {\n        for (let pinPreview of this.pinPreviews) {\n            // Skip any images that have already been pinned in this session\n            if (pinPreview.instance.dataset.pinned) {\n                continue;\n            }\n\n            pinPreview.createPin();\n        }\n    }\n\n    /**\n     * Display the privacy policy modal\n     *\n     * @returns {null}\n     */\n    showPrivacyPolicy() {\n        this.modalOverlay.classList.remove('hidden');\n        this.modalOverlay.querySelector('.privacy-policy-modal').classList.remove('hidden');\n    }\n\n    /**\n     * Hide the privacy policy modal\n     *\n     * @returns {null}\n     */\n    hidePrivacyPolicy() {\n        this.modalOverlay.classList.add('hidden');\n        this.modalOverlay.querySelector('.privacy-policy-modal').classList.add('hidden');\n    }\n\n    /**\n     * Display the keyboard shortcuts modal\n     *\n     * @returns {null}\n     */\n    showKeyboardShortcuts() {\n        this.modalOverlay.classList.remove('hidden');\n        this.modalOverlay.querySelector('.keyboard-shortcuts-modal').classList.remove('hidden');\n    }\n\n    /**\n     * Hide the keyboard shortcuts modal\n     *\n     * @returns {null}\n     */\n    hideKeyboardShortcuts() {\n        this.modalOverlay.classList.add('hidden');\n        this.modalOverlay.querySelector('.keyboard-shortcuts-modal').classList.add('hidden');\n    }\n\n    /**\n     * Auto fill the note and link fields from the first Pin Preview element, to the rest of the Pin Preview elements\n     *\n     * @returns {null}\n     */\n    autofillFields() {\n        if (this.pinPreviews.length === 0) {\n            return;\n        }\n\n        const noteField = this.pinPreviews[0].instance.querySelector(\"#note\").value;\n        const linkField = this.pinPreviews[0].instance.querySelector(\".link\").value;\n\n        for (let pinPreview of this.pinPreviews) {\n            pinPreview.setNote(noteField);\n            pinPreview.setLink(linkField);\n        }\n    }\n\n    /**\n     * Check for and enable/disable the Pin button from being sticky\n     *\n     * @returns {null}\n     */\n    updateStickyPin() {\n        if (window.pageYOffset >= this.windowBreakpoint) {\n            document.querySelector('.action-toolbar').classList.toggle('sticky', true);\n            document.querySelector('.preview-pins-container').classList.toggle('toolbar-is-sticky', true);\n        } else {\n            document.querySelector('.action-toolbar').classList.toggle('sticky', false);\n            document.querySelector('.preview-pins-container').classList.toggle('toolbar-is-sticky', false);\n        }\n    }\n\n    /**\n     * Toggle the state of the action menu\n     *\n     * @param {boolean|undefined} show [Optional] True/false to force show/hide the menu\n     *                                 No value passed and the menu will just toggle\n     *\n     * @returns {null}\n     */\n    static ToggleActionMenu(show = undefined) {\n        const actionButtons = document.querySelector('.action-buttons');\n\n        if (typeof show !== 'undefined') {\n            actionButtons.classList.toggle('show-menu', show);\n        } else {\n            actionButtons.classList.toggle('show-menu');\n        }\n\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/views/Application.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\n * Copyright (C) 2017 Luke Denton\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Authorization from 'views/Authorization';\nimport Application from 'views/Application';\nimport API from 'services/API';\nimport CustomEvent from 'services/CustomEvent';\n\n// If the user is using Internet Explorer, kindly let them know that their browser is out of date, and that they should update\nif (window.navigator.userAgent.indexOf(\"MSIE\") > 0 || !!navigator.userAgent.match(/Trident\\/7\\./)) {\n    document.querySelector('body').classList.add('no-scroll');\n    document.querySelector('.modal-overlay').classList.remove('hidden');\n    document.querySelector('.modal-overlay').classList.add('ie-overlay');\n    document.querySelector('.modal-overlay').querySelector('.internet-explorer-disabled').classList.remove('hidden');\n} else {\n    // Create instances of application classes\n    new Authorization();\n    new Application();\n\n    // Determine if used is logged in and publish appropriate status\n    if (!API.IsAuthenticated()) {\n        CustomEvent.trigger('user-not-authenticated');\n    } else {\n        CustomEvent.trigger('user-authenticated');\n    }\n\n    if (window.location.origin !== 'https://bulkpinner.github.io') {\n        Bugsnag.releaseStage = 'development';\n        Bugsnag.notifyReleaseStages = ['production', 'staging'];\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/main.js","(function () {\n\n    'use strict';\n    \n    function Bullet ()\n    {\n        // ------------------------------------------------------------------------------------------\n        // -- Custom Errors\n        // ------------------------------------------------------------------------------------------\n        function ParamCountError (methodName, expectedParamsString, paramCount) {\n            \n            this.message = 'Bullet:: [' + methodName + '] ' + expectedParamsString + ', but received: ' + paramCount;\n            var error = new Error(this.message);\n            if (typeof error.stack !== 'undefined') this.stack = error.stack;\n        }\n        ParamCountError.prototype = new Error();\n        ParamCountError.prototype.name = ParamCountError.name;\n        ParamCountError.prototype.constructor = ParamCountError;\n\n        function ParamTypeError (methodName, parameterName, parameter, expectedType) {\n            \n            this.message = 'Bullet:: [' + methodName + '] Expected parameter - ' + parameterName + ' - to be type: ' + expectedType + ', but received type: ' + typeof parameter;\n            var error = new TypeError(this.message);\n            if (typeof error.stack !== 'undefined') this.stack = error.stack;\n        }\n        ParamTypeError.prototype = new TypeError();\n        ParamTypeError.prototype.name = ParamTypeError.name;\n        ParamTypeError.prototype.constructor = ParamTypeError;\n\n        function EventNameLengthError (methodName) {\n            \n            this.message = 'Bullet:: [' + methodName + '] Expected event name parameter to be longer than 0 characters';\n            var error = new Error(this.message);\n            if (typeof error.stack !== 'undefined') this.stack = error.stack;\n        }\n        EventNameLengthError.prototype = new Error();\n        EventNameLengthError.prototype.name = EventNameLengthError.name;\n        EventNameLengthError.prototype.constructor = EventNameLengthError;\n\n        function EventNamesArrayLengthError (methodName) {\n            \n            this.message = 'Bullet:: [' + methodName + '] Expected event names array to contain one or more event names';\n            var error = new Error(this.message);\n            if (typeof error.stack !== 'undefined') this.stack = error.stack;\n        }\n        EventNamesArrayLengthError.prototype = new Error();\n        EventNamesArrayLengthError.prototype.name = EventNamesArrayLengthError.name;\n        EventNamesArrayLengthError.prototype.constructor = EventNamesArrayLengthError;\n\n        function UndeclaredEventError (methodName, eventName) {\n            \n            this.message = 'Bullet:: [' + methodName + '] Event string: \"' + eventName + '\" does not exist within the events dictionary\\nPlease use the Bullet.addEventName method to add this string.';\n\n            var error = new Error(this.message);\n            if (typeof error.stack !== 'undefined') this.stack = error.stack;\n        }\n        UndeclaredEventError.prototype = new Error();\n        UndeclaredEventError.prototype.name = UndeclaredEventError.name;\n        UndeclaredEventError.prototype.constructor = UndeclaredEventError;\n\n\n        function UnmappedEventError (methodName, eventName) {\n            \n            this.message = 'Bullet:: [' + methodName + '] Event string: \"' + eventName + '\" is not mapped to any callbacks\\nPlease use the Bullet.on method to map this string to a callback.';\n\n            var error = new Error(this.message);\n            if (typeof error.stack !== 'undefined') this.stack = error.stack;\n        }\n        UnmappedEventError.prototype = new Error();\n        UnmappedEventError.prototype.name = UnmappedEventError.name;\n        UnmappedEventError.prototype.constructor = UnmappedEventError;\n\n        var _CALLBACK_NAMESPACE = '__bullet_pubsub__';\n        // ------------------------------------------------------------------------------------------\n        // -- Private variables\n        // ------------------------------------------------------------------------------------------\n        var _self = this;\n        var _mappings = {};\n        var _strictMode = false;\n        var _triggerAsync = true;\n\n        // Expose custom error type constructors (for testing), but use an underscore to imply privacy.\n        _self._errors = {\n            ParamCountError : ParamCountError,\n            ParamTypeError : ParamTypeError,\n            EventNameLengthError : EventNameLengthError,\n            EventNamesArrayLengthError: EventNamesArrayLengthError,\n            UndeclaredEventError : UndeclaredEventError,\n            UnmappedEventError : UnmappedEventError,\n        };\n\n\n        // ------------------------------------------------------------------------------------------\n        // -- Public variables\n        // ------------------------------------------------------------------------------------------\n        _self.events = {};\n\n\n        // ------------------------------------------------------------------------------------------\n        // -- Private methods\n        // ------------------------------------------------------------------------------------------\n        function _runCallback (eventName, data) {\n            for (var id in _mappings[eventName].callbacks)\n            {\n                var callbackObject = _mappings[eventName].callbacks[id];\n\n                if (typeof callbackObject.cb === 'function') callbackObject.cb(data);\n                if (typeof callbackObject.once === 'boolean' && callbackObject.once === true) _self.off(eventName, callbackObject.cb);\n            }\n        }\n\n        function _cloneCallbacks (callbacks) {\n            var clonedCallbacks = {};\n\n            for (var callbackName in callbacks) {\n                \n                clonedCallbacks[callbackName] = {\n                    cb : callbacks[callbackName].cb,\n                    once : callbacks[callbackName].once\n                };\n            }\n\n            return clonedCallbacks;\n        }\n\n        function _deleteAllCallbackReferencesForEvent (eventName)\n        {\n            for (var id in _mappings[eventName].callbacks)\n            {\n                var callback = _mappings[eventName].callbacks[id].cb;\n\n                callback[_CALLBACK_NAMESPACE].totalEvents--;\n\n                if (callback[_CALLBACK_NAMESPACE].totalEvents === 0)\n                {\n                    delete callback[_CALLBACK_NAMESPACE];\n                }\n                else\n                {\n                    delete callback[_CALLBACK_NAMESPACE][eventName];\n                }\n            }\n        }\n\n        function _deleteAllCallbackReferences ()\n        {\n            for (var eventName in _mappings)\n            {\n                _deleteAllCallbackReferencesForEvent(eventName);\n            }\n        }\n\n        // Expose _getMappings method (for testing), but use an underscore to imply privacy.\n        _self._getMappings = function () {\n            \n            // Return a dictionary object that has no effect on app state to ensure '_mappings'\n            // stays private, even if the value returned from this method is modified.\n            var clonedMappings = {};\n\n            for (var mapping in _mappings)\n            {             \n                clonedMappings[mapping] = {\n                    callbacks : _cloneCallbacks(_mappings[mapping].callbacks),\n                    totalCallbacks : _mappings[mapping].totalCallbacks\n                };\n            }\n\n            return clonedMappings;\n        };\n\n\n        // ------------------------------------------------------------------------------------------\n        // -- Public methods\n        // ------------------------------------------------------------------------------------------\n        _self.on = function (eventName, fn, once)\n        {\n            if (arguments.length < 2 || arguments.length > 3)\n            {\n                throw new ParamCountError('on', 'Expected between 2 and 3 parameters', arguments.length);\n            }\n\n            if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('on', 'event name', eventName, 'string');\n            }\n            else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('on');\n            }\n            else if (_strictMode && typeof _self.events[eventName] === 'undefined')\n            {\n                throw new UndeclaredEventError('on', eventName);\n            }\n\n            if (typeof fn !== 'function')\n            {\n                throw new ParamTypeError('on', 'callback', fn, 'function');\n            }\n\n            if (typeof once !== 'undefined' && typeof once !== 'boolean')\n            {\n                throw new ParamTypeError('on', 'once', once, 'boolean');\n            }\n\n            // Create a reference between the callback and stored event.\n            var callbackId = null;\n\n            // If the named event object already exists in the dictionary...\n            if (typeof _mappings[eventName] !== 'undefined')\n            {\n                // Attempt to get the callback ID from the callback itself.\n                if (typeof fn[_CALLBACK_NAMESPACE] === 'undefined')\n                {\n                    fn[_CALLBACK_NAMESPACE] = {\n                        totalEvents: 0\n                    };\n                }\n                \n                // Add a new callback object to the existing event object.\n                if (typeof fn[_CALLBACK_NAMESPACE][eventName] === 'undefined')\n                {\n                    callbackId = _mappings[eventName].totalCallbacks;\n\n                    _mappings[eventName].totalCallbacks++;\n\n                    _mappings[eventName].callbacks[callbackId] = {\n                        cb : fn,\n                        once : typeof once === 'boolean' ? once : false\n                    };\n\n                    // On the callback, create a reference to the event mapping.\n                    fn[_CALLBACK_NAMESPACE][eventName] = callbackId;\n                    fn[_CALLBACK_NAMESPACE].totalEvents++;\n                }\n\n                if (typeof once === 'boolean')\n                {\n                    // Get the callback ID from the value of the existing event name key.\n                    callbackId = fn[_CALLBACK_NAMESPACE][eventName];\n\n                    // The function already exists, so update it's 'once' value.\n                    _mappings[eventName].callbacks[callbackId].once = once;\n                }\n            }\n            else\n            {\n                // Create a new event object in the dictionary with the specified name and callback.\n                _mappings[eventName] = {\n                    callbacks : {}\n                };\n\n                callbackId = 0;\n\n                _mappings[eventName].callbacks[callbackId] = {cb : fn, once : !!once};\n                _mappings[eventName].totalCallbacks = 1;\n\n                // On the callback, create a reference to the event mapping.\n                if (typeof fn[_CALLBACK_NAMESPACE] === 'undefined')\n                {\n                    fn[_CALLBACK_NAMESPACE] = {};\n                    fn[_CALLBACK_NAMESPACE].totalEvents = 1;\n                }\n                else\n                {\n                    fn[_CALLBACK_NAMESPACE].totalEvents++;\n                }\n                \n                fn[_CALLBACK_NAMESPACE][eventName] = callbackId;\n            }\n        };\n\n        _self.once = function (eventName, fn)\n        {\n            if (arguments.length !== 2)\n            {\n                throw new ParamCountError('once', 'Expected 2 parameters', arguments.length);\n            }\n            else if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('once', 'event name', eventName, 'string');\n            }\n            else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('once');\n            }\n            else if (_strictMode && typeof _self.events[eventName] === 'undefined')\n            {\n                throw new UndeclaredEventError('once', eventName);\n            }\n\n            if (typeof fn !== 'function')\n            {\n                throw new ParamTypeError('once', 'callback', fn, 'function');\n            }\n\n            _self.on(eventName, fn, true);\n        };\n\n        _self.off = function (eventName, fn)\n        {\n            if (arguments.length === 0)\n            {\n                // delete all references to Bullet that exist on mapped callbacks.\n                _deleteAllCallbackReferences();\n\n                // Remove all mappings from the dictionary.\n                _mappings = {};\n\n                return;\n            }\n            else if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('off', 'event name', eventName, 'string');\n            }\n            else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('off');\n            }\n            else if (_strictMode && typeof _self.events[eventName] === 'undefined')\n            {\n                throw new UndeclaredEventError('off', eventName);\n            }\n\n            if (typeof _mappings[eventName] === 'undefined')\n            {\n                // There is no mapping to remove, so return silently.\n                return;\n            }\n\n            // Remove just the function, if passed as a parameter and in the dictionary.\n            if (typeof fn === 'function')\n            {\n                // if (typeof fn[_CALLBACK_NAMESPACE] === 'undefined' || typeof fn[_CALLBACK_NAMESPACE][eventName] === 'undefined')\n                // {\n                //     // TODO: Throw error here if in strict mode.\n                // }\n\n                // Retrieve a reference to the stored event from the callback.\n                var id = fn[_CALLBACK_NAMESPACE][eventName];\n                var fnToRemove = _mappings[eventName].callbacks[id];\n\n                if (typeof fnToRemove !== 'undefined')\n                {\n                    // delete the callback object from the dictionary.\n                    delete _mappings[eventName].callbacks[id];\n\n                    // delete the event reference on the callback function.\n                    delete fn[_CALLBACK_NAMESPACE][eventName];\n\n                    _mappings[eventName].totalCallbacks--;\n                    fn[_CALLBACK_NAMESPACE].totalEvents--;\n\n                    if (_mappings[eventName].totalCallbacks === 0)\n                    {\n                        // There are no more functions in the dictionary that are\n                        // registered to this event, so delete the named event object.\n                        delete _mappings[eventName];\n                    }\n\n                    if (fn[_CALLBACK_NAMESPACE].totalEvents === 0)\n                    {\n                        // There are no more events registered on this callback,\n                        // so delete the Bullet namespace.\n                        delete fn[_CALLBACK_NAMESPACE];\n                    }\n                }\n            }\n            else if (typeof fn !== 'undefined')\n            {\n                throw new ParamTypeError('off', 'callback', fn, 'function');\n            }\n            else\n            {\n                // No callback was passed to the 'off' method...\n\n                // For each callback in _mappings[eventName], delete the reference to\n                // the specified event name on the callback itself.\n                _deleteAllCallbackReferencesForEvent(eventName);\n\n                // Delete all functions in the dictionary that are registered to this\n                // event by deleting the named event object.\n                delete _mappings[eventName];\n            }\n        };\n\n        // Replace a single mapped callback for the specified event name with a new callback.\n        _self.replaceCallback = function (eventName, oldFn, newFn, once) {\n\n            if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('replaceCallback', 'event name', eventName, 'string');\n            }\n            else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('replaceCallback');\n            }\n            else if (typeof _mappings[eventName] === 'undefined')\n            {\n                throw new UnmappedEventError('replaceCallback', eventName);\n            }\n            else if (_strictMode && typeof _self.events[eventName] === 'undefined')\n            {\n                throw new UndeclaredEventError('replaceCallback', eventName);\n            }\n\n            if (typeof oldFn !== 'function')\n            {\n                throw new ParamTypeError('replaceCallback', 'callback', oldFn, 'function');\n            }\n\n            if (typeof newFn !== 'function')\n            {\n                throw new ParamTypeError('replaceCallback', 'callback', newFn, 'function');\n            }\n\n            if (typeof once !== 'undefined' && typeof once !== 'boolean')\n            {\n                throw new ParamTypeError('replaceCallback', 'once', once, 'boolean');\n            }\n            \n            _self.off(eventName, oldFn);\n            _self.on(eventName, newFn, once);\n        };\n\n        // Replace all of the specified event names mapped callbacks with the specified callback.\n        _self.replaceAllCallbacks = function (eventName, newFn, once) {\n\n            if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('replace', 'event name', eventName, 'string');\n            }\n            else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('replace');\n            }\n            else if (typeof _mappings[eventName] === 'undefined')\n            {\n                throw new UnmappedEventError('replace', eventName);\n            }\n            else if (_strictMode && typeof _self.events[eventName] === 'undefined')\n            {\n                throw new UndeclaredEventError('replace', eventName);\n            }\n\n            if (typeof newFn !== 'function')\n            {\n                throw new ParamTypeError('replace', 'callback', newFn, 'function');\n            }\n\n            if (typeof once !== 'undefined' && typeof once !== 'boolean')\n            {\n                throw new ParamTypeError('replace', 'once', once, 'boolean');\n            }\n            \n            _self.off(eventName);\n            _self.on(eventName, newFn, once);\n        };\n\n        _self.trigger = function (eventName, data)\n        {\n            if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('trigger', 'event name', eventName, 'string');\n            }\n            else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('trigger');\n            }\n            else if (_strictMode && typeof _self.events[eventName] === 'undefined')\n            {\n                throw new UndeclaredEventError('trigger', eventName);\n            }\n            \n            if (typeof _mappings[eventName] === 'undefined')\n            {\n                if (_strictMode) throw new UnmappedEventError('trigger', eventName);\n\n                // Return silently if not in strict mode.\n                return;\n            }\n\n            // Check whether or not this is a browser environment.\n            if (_triggerAsync && typeof window !== 'undefined')\n            {\n                window.setTimeout(function(){\n                    _runCallback(eventName, data);\n                }, 0);\n            }\n            else\n            {\n                _runCallback(eventName, data);\n            }\n        };\n\n        _self.addEventName = function (eventName) {\n\n            if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('addEventName', 'event name', eventName, 'string');\n            }\n            else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('addEventName');\n            }\n\n            _self.events[eventName] = eventName;\n        };\n\n        _self.addMultipleEventNames = function (eventNames) {\n            \n            if (!(eventNames instanceof Array))\n            {\n                throw new ParamTypeError('addMultipleEventNames', 'event names', eventNames, 'array');\n            }\n            else if (eventNames.length === 0)\n            {\n                throw new EventNamesArrayLengthError('addMultipleEventNames');\n            }\n\n            var i = 0;\n            var length = eventNames.length;\n\n            for(i; i < length; i++) {\n                var currentEventName = eventNames[i];\n                \n                _self.addEventName(currentEventName);\n            }\n        }\n\n        _self.removeEventName = function (eventName) {\n\n            if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('removeEventName', 'event name', eventName, 'string');\n            }\n             else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('removeEventName');\n            }\n\n            if (_self.events[eventName]) delete _self.events[eventName];\n        };\n\n        _self.getStrictMode = function () {\n\n            // Return a boolean that doesn't directly point to the internal '_strictMode' property.\n            return _strictMode === true ? true : false;\n        };\n\n        _self.setStrictMode = function (useStrictMode) {\n\n            if (typeof useStrictMode !== 'boolean') throw new ParamTypeError('setStrictMode', 'strict mode', useStrictMode, 'boolean');\n\n            _strictMode = useStrictMode;\n        };\n\n        _self.getTriggerAsync = function () {\n\n            // Return a boolean that doesn't directly point to the internal '_triggerAsync' property.\n            return _triggerAsync === true ? true : false;\n        };\n\n        _self.setTriggerAsync = function (useAsync) {\n\n            if (typeof useAsync !== 'boolean') throw new ParamTypeError('setTriggerAsync', 'trigger async', useAsync, 'boolean');\n\n            _triggerAsync = useAsync;\n        };\n\n        // TODO : Create an 'addMultipleEventNames' method with an array of strings passed as a param.\n        // - include type checks for string while looping over the array.\n\n        // TODO : Create a 'replaceAllEventNames' method with an array of strings passed as a param.\n        // - include type checks for string while looping over the array.\n\n        // TODO : Create a 'removeAllEventNames' method. No params necessary.\n        //  Internally this could simply call 'replaceAllEventNames' and pass an empty array as a param.\n\n        // TODO : Create an 'onAny' method with an array of strings passed as the first param and a single callback as the second.\n        // - include type checks for string while looping over the array.\n\n        // TODO : Create an 'onMultiple' method with an array of flat objects passed as a param.\n        // - example of required param structure:\n        // [{eventName: 'someEvent', callback: someCallback, once: false}, {eventName: 'anotherEvent', callback: anotherCallback, once: true}]\n    }\n\n\n    // ------------------------------------------------------------------------------------------\n    // -- Module definition\n    // ------------------------------------------------------------------------------------------\n    // Check for AMD/Module support, otherwise define Bullet as a global variable.\n\n    if (typeof define !== 'undefined' && define.amd)\n    {\n        // AMD. Register as an anonymous module.\n        define (function()\n        {\n            return new Bullet();\n        });\n\n    }\n    else if (typeof module !== 'undefined' && module.exports)\n    {\n        module.exports = new Bullet();\n    }\n    else\n    {\n        window.Bullet = new Bullet();\n    }\n    \n})();\n\n\n// WEBPACK FOOTER //\n// ./~/bullet-pubsub/dist/bullet.js","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/debounce/index.js","/*global define:false */\n/**\n * Copyright 2012-2017 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Mousetrap is a simple keyboard shortcut library for Javascript with\n * no external dependencies\n *\n * @version 1.6.1\n * @url craig.is/killing/mice\n */\n(function(window, document, undefined) {\n\n    // Check if mousetrap is used inside browser, if not, return\n    if (!window) {\n        return;\n    }\n\n    /**\n     * mapping of special keycodes to their corresponding keys\n     *\n     * everything in this dictionary cannot use keypress events\n     * so it has to be here to map to the correct keycodes for\n     * keyup/keydown events\n     *\n     * @type {Object}\n     */\n    var _MAP = {\n        8: 'backspace',\n        9: 'tab',\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        20: 'capslock',\n        27: 'esc',\n        32: 'space',\n        33: 'pageup',\n        34: 'pagedown',\n        35: 'end',\n        36: 'home',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        45: 'ins',\n        46: 'del',\n        91: 'meta',\n        93: 'meta',\n        224: 'meta'\n    };\n\n    /**\n     * mapping for special characters so they can support\n     *\n     * this dictionary is only used incase you want to bind a\n     * keyup or keydown event to one of these keys\n     *\n     * @type {Object}\n     */\n    var _KEYCODE_MAP = {\n        106: '*',\n        107: '+',\n        109: '-',\n        110: '.',\n        111 : '/',\n        186: ';',\n        187: '=',\n        188: ',',\n        189: '-',\n        190: '.',\n        191: '/',\n        192: '`',\n        219: '[',\n        220: '\\\\',\n        221: ']',\n        222: '\\''\n    };\n\n    /**\n     * this is a mapping of keys that require shift on a US keypad\n     * back to the non shift equivelents\n     *\n     * this is so you can use keyup events with these keys\n     *\n     * note that this will only work reliably on US keyboards\n     *\n     * @type {Object}\n     */\n    var _SHIFT_MAP = {\n        '~': '`',\n        '!': '1',\n        '@': '2',\n        '#': '3',\n        '$': '4',\n        '%': '5',\n        '^': '6',\n        '&': '7',\n        '*': '8',\n        '(': '9',\n        ')': '0',\n        '_': '-',\n        '+': '=',\n        ':': ';',\n        '\\\"': '\\'',\n        '<': ',',\n        '>': '.',\n        '?': '/',\n        '|': '\\\\'\n    };\n\n    /**\n     * this is a list of special strings you can use to map\n     * to modifier keys when you specify your keyboard shortcuts\n     *\n     * @type {Object}\n     */\n    var _SPECIAL_ALIASES = {\n        'option': 'alt',\n        'command': 'meta',\n        'return': 'enter',\n        'escape': 'esc',\n        'plus': '+',\n        'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n    };\n\n    /**\n     * variable to store the flipped version of _MAP from above\n     * needed to check if we should use keypress or not when no action\n     * is specified\n     *\n     * @type {Object|undefined}\n     */\n    var _REVERSE_MAP;\n\n    /**\n     * loop through the f keys, f1 to f19 and add them to the map\n     * programatically\n     */\n    for (var i = 1; i < 20; ++i) {\n        _MAP[111 + i] = 'f' + i;\n    }\n\n    /**\n     * loop through to map numbers on the numeric keypad\n     */\n    for (i = 0; i <= 9; ++i) {\n\n        // This needs to use a string cause otherwise since 0 is falsey\n        // mousetrap will never fire for numpad 0 pressed as part of a keydown\n        // event.\n        //\n        // @see https://github.com/ccampbell/mousetrap/pull/258\n        _MAP[i + 96] = i.toString();\n    }\n\n    /**\n     * cross browser add event method\n     *\n     * @param {Element|HTMLDocument} object\n     * @param {string} type\n     * @param {Function} callback\n     * @returns void\n     */\n    function _addEvent(object, type, callback) {\n        if (object.addEventListener) {\n            object.addEventListener(type, callback, false);\n            return;\n        }\n\n        object.attachEvent('on' + type, callback);\n    }\n\n    /**\n     * takes the event and returns the key character\n     *\n     * @param {Event} e\n     * @return {string}\n     */\n    function _characterFromEvent(e) {\n\n        // for keypress events we should return the character as is\n        if (e.type == 'keypress') {\n            var character = String.fromCharCode(e.which);\n\n            // if the shift key is not pressed then it is safe to assume\n            // that we want the character to be lowercase.  this means if\n            // you accidentally have caps lock on then your key bindings\n            // will continue to work\n            //\n            // the only side effect that might not be desired is if you\n            // bind something like 'A' cause you want to trigger an\n            // event when capital A is pressed caps lock will no longer\n            // trigger the event.  shift+a will though.\n            if (!e.shiftKey) {\n                character = character.toLowerCase();\n            }\n\n            return character;\n        }\n\n        // for non keypress events the special maps are needed\n        if (_MAP[e.which]) {\n            return _MAP[e.which];\n        }\n\n        if (_KEYCODE_MAP[e.which]) {\n            return _KEYCODE_MAP[e.which];\n        }\n\n        // if it is not in the special map\n\n        // with keydown and keyup events the character seems to always\n        // come in as an uppercase character whether you are pressing shift\n        // or not.  we should make sure it is always lowercase for comparisons\n        return String.fromCharCode(e.which).toLowerCase();\n    }\n\n    /**\n     * checks if two arrays are equal\n     *\n     * @param {Array} modifiers1\n     * @param {Array} modifiers2\n     * @returns {boolean}\n     */\n    function _modifiersMatch(modifiers1, modifiers2) {\n        return modifiers1.sort().join(',') === modifiers2.sort().join(',');\n    }\n\n    /**\n     * takes a key event and figures out what the modifiers are\n     *\n     * @param {Event} e\n     * @returns {Array}\n     */\n    function _eventModifiers(e) {\n        var modifiers = [];\n\n        if (e.shiftKey) {\n            modifiers.push('shift');\n        }\n\n        if (e.altKey) {\n            modifiers.push('alt');\n        }\n\n        if (e.ctrlKey) {\n            modifiers.push('ctrl');\n        }\n\n        if (e.metaKey) {\n            modifiers.push('meta');\n        }\n\n        return modifiers;\n    }\n\n    /**\n     * prevents default for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _preventDefault(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n            return;\n        }\n\n        e.returnValue = false;\n    }\n\n    /**\n     * stops propogation for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _stopPropagation(e) {\n        if (e.stopPropagation) {\n            e.stopPropagation();\n            return;\n        }\n\n        e.cancelBubble = true;\n    }\n\n    /**\n     * determines if the keycode specified is a modifier key or not\n     *\n     * @param {string} key\n     * @returns {boolean}\n     */\n    function _isModifier(key) {\n        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';\n    }\n\n    /**\n     * reverses the map lookup so that we can look for specific keys\n     * to see what can and can't use keypress\n     *\n     * @return {Object}\n     */\n    function _getReverseMap() {\n        if (!_REVERSE_MAP) {\n            _REVERSE_MAP = {};\n            for (var key in _MAP) {\n\n                // pull out the numeric keypad from here cause keypress should\n                // be able to detect the keys from the character\n                if (key > 95 && key < 112) {\n                    continue;\n                }\n\n                if (_MAP.hasOwnProperty(key)) {\n                    _REVERSE_MAP[_MAP[key]] = key;\n                }\n            }\n        }\n        return _REVERSE_MAP;\n    }\n\n    /**\n     * picks the best action based on the key combination\n     *\n     * @param {string} key - character for key\n     * @param {Array} modifiers\n     * @param {string=} action passed in\n     */\n    function _pickBestAction(key, modifiers, action) {\n\n        // if no action was picked in we should try to pick the one\n        // that we think would work best for this key\n        if (!action) {\n            action = _getReverseMap()[key] ? 'keydown' : 'keypress';\n        }\n\n        // modifier keys don't work as expected with keypress,\n        // switch to keydown\n        if (action == 'keypress' && modifiers.length) {\n            action = 'keydown';\n        }\n\n        return action;\n    }\n\n    /**\n     * Converts from a string key combination to an array\n     *\n     * @param  {string} combination like \"command+shift+l\"\n     * @return {Array}\n     */\n    function _keysFromString(combination) {\n        if (combination === '+') {\n            return ['+'];\n        }\n\n        combination = combination.replace(/\\+{2}/g, '+plus');\n        return combination.split('+');\n    }\n\n    /**\n     * Gets info for a specific key combination\n     *\n     * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n     * @param  {string=} action\n     * @returns {Object}\n     */\n    function _getKeyInfo(combination, action) {\n        var keys;\n        var key;\n        var i;\n        var modifiers = [];\n\n        // take the keys from this pattern and figure out what the actual\n        // pattern is all about\n        keys = _keysFromString(combination);\n\n        for (i = 0; i < keys.length; ++i) {\n            key = keys[i];\n\n            // normalize key names\n            if (_SPECIAL_ALIASES[key]) {\n                key = _SPECIAL_ALIASES[key];\n            }\n\n            // if this is not a keypress event then we should\n            // be smart about using shift keys\n            // this will only work for US keyboards however\n            if (action && action != 'keypress' && _SHIFT_MAP[key]) {\n                key = _SHIFT_MAP[key];\n                modifiers.push('shift');\n            }\n\n            // if this key is a modifier then add it to the list of modifiers\n            if (_isModifier(key)) {\n                modifiers.push(key);\n            }\n        }\n\n        // depending on what the key combination is\n        // we will try to pick the best event for it\n        action = _pickBestAction(key, modifiers, action);\n\n        return {\n            key: key,\n            modifiers: modifiers,\n            action: action\n        };\n    }\n\n    function _belongsTo(element, ancestor) {\n        if (element === null || element === document) {\n            return false;\n        }\n\n        if (element === ancestor) {\n            return true;\n        }\n\n        return _belongsTo(element.parentNode, ancestor);\n    }\n\n    function Mousetrap(targetElement) {\n        var self = this;\n\n        targetElement = targetElement || document;\n\n        if (!(self instanceof Mousetrap)) {\n            return new Mousetrap(targetElement);\n        }\n\n        /**\n         * element to attach key events to\n         *\n         * @type {Element}\n         */\n        self.target = targetElement;\n\n        /**\n         * a list of all the callbacks setup via Mousetrap.bind()\n         *\n         * @type {Object}\n         */\n        self._callbacks = {};\n\n        /**\n         * direct map of string combinations to callbacks used for trigger()\n         *\n         * @type {Object}\n         */\n        self._directMap = {};\n\n        /**\n         * keeps track of what level each sequence is at since multiple\n         * sequences can start out with the same sequence\n         *\n         * @type {Object}\n         */\n        var _sequenceLevels = {};\n\n        /**\n         * variable to store the setTimeout call\n         *\n         * @type {null|number}\n         */\n        var _resetTimer;\n\n        /**\n         * temporary state where we will ignore the next keyup\n         *\n         * @type {boolean|string}\n         */\n        var _ignoreNextKeyup = false;\n\n        /**\n         * temporary state where we will ignore the next keypress\n         *\n         * @type {boolean}\n         */\n        var _ignoreNextKeypress = false;\n\n        /**\n         * are we currently inside of a sequence?\n         * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n         *\n         * @type {boolean|string}\n         */\n        var _nextExpectedAction = false;\n\n        /**\n         * resets all sequence counters except for the ones passed in\n         *\n         * @param {Object} doNotReset\n         * @returns void\n         */\n        function _resetSequences(doNotReset) {\n            doNotReset = doNotReset || {};\n\n            var activeSequences = false,\n                key;\n\n            for (key in _sequenceLevels) {\n                if (doNotReset[key]) {\n                    activeSequences = true;\n                    continue;\n                }\n                _sequenceLevels[key] = 0;\n            }\n\n            if (!activeSequences) {\n                _nextExpectedAction = false;\n            }\n        }\n\n        /**\n         * finds all callbacks that match based on the keycode, modifiers,\n         * and action\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event|Object} e\n         * @param {string=} sequenceName - name of the sequence we are looking for\n         * @param {string=} combination\n         * @param {number=} level\n         * @returns {Array}\n         */\n        function _getMatches(character, modifiers, e, sequenceName, combination, level) {\n            var i;\n            var callback;\n            var matches = [];\n            var action = e.type;\n\n            // if there are no events related to this keycode\n            if (!self._callbacks[character]) {\n                return [];\n            }\n\n            // if a modifier key is coming up on its own we should allow it\n            if (action == 'keyup' && _isModifier(character)) {\n                modifiers = [character];\n            }\n\n            // loop through all callbacks for the key that was pressed\n            // and see if any of them match\n            for (i = 0; i < self._callbacks[character].length; ++i) {\n                callback = self._callbacks[character][i];\n\n                // if a sequence name is not specified, but this is a sequence at\n                // the wrong level then move onto the next match\n                if (!sequenceName && callback.seq && _sequenceLevels[callback.seq] != callback.level) {\n                    continue;\n                }\n\n                // if the action we are looking for doesn't match the action we got\n                // then we should keep going\n                if (action != callback.action) {\n                    continue;\n                }\n\n                // if this is a keypress event and the meta key and control key\n                // are not pressed that means that we need to only look at the\n                // character, otherwise check the modifiers as well\n                //\n                // chrome will not fire a keypress if meta or control is down\n                // safari will fire a keypress if meta or meta+shift is down\n                // firefox will fire a keypress if meta or control is down\n                if ((action == 'keypress' && !e.metaKey && !e.ctrlKey) || _modifiersMatch(modifiers, callback.modifiers)) {\n\n                    // when you bind a combination or sequence a second time it\n                    // should overwrite the first one.  if a sequenceName or\n                    // combination is specified in this call it does just that\n                    //\n                    // @todo make deleting its own method?\n                    var deleteCombo = !sequenceName && callback.combo == combination;\n                    var deleteSequence = sequenceName && callback.seq == sequenceName && callback.level == level;\n                    if (deleteCombo || deleteSequence) {\n                        self._callbacks[character].splice(i, 1);\n                    }\n\n                    matches.push(callback);\n                }\n            }\n\n            return matches;\n        }\n\n        /**\n         * actually calls the callback function\n         *\n         * if your callback function returns false this will use the jquery\n         * convention - prevent default and stop propogation on the event\n         *\n         * @param {Function} callback\n         * @param {Event} e\n         * @returns void\n         */\n        function _fireCallback(callback, e, combo, sequence) {\n\n            // if this event should not happen stop here\n            if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n                return;\n            }\n\n            if (callback(e, combo) === false) {\n                _preventDefault(e);\n                _stopPropagation(e);\n            }\n        }\n\n        /**\n         * handles a character key event\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event} e\n         * @returns void\n         */\n        self._handleKey = function(character, modifiers, e) {\n            var callbacks = _getMatches(character, modifiers, e);\n            var i;\n            var doNotReset = {};\n            var maxLevel = 0;\n            var processedSequenceCallback = false;\n\n            // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n            for (i = 0; i < callbacks.length; ++i) {\n                if (callbacks[i].seq) {\n                    maxLevel = Math.max(maxLevel, callbacks[i].level);\n                }\n            }\n\n            // loop through matching callbacks for this key event\n            for (i = 0; i < callbacks.length; ++i) {\n\n                // fire for all sequence callbacks\n                // this is because if for example you have multiple sequences\n                // bound such as \"g i\" and \"g t\" they both need to fire the\n                // callback for matching g cause otherwise you can only ever\n                // match the first one\n                if (callbacks[i].seq) {\n\n                    // only fire callbacks for the maxLevel to prevent\n                    // subsequences from also firing\n                    //\n                    // for example 'a option b' should not cause 'option b' to fire\n                    // even though 'option b' is part of the other sequence\n                    //\n                    // any sequences that do not match here will be discarded\n                    // below by the _resetSequences call\n                    if (callbacks[i].level != maxLevel) {\n                        continue;\n                    }\n\n                    processedSequenceCallback = true;\n\n                    // keep a list of which sequences were matches for later\n                    doNotReset[callbacks[i].seq] = 1;\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo, callbacks[i].seq);\n                    continue;\n                }\n\n                // if there were no sequence matches but we are still here\n                // that means this is a regular match so we should fire that\n                if (!processedSequenceCallback) {\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo);\n                }\n            }\n\n            // if the key you pressed matches the type of sequence without\n            // being a modifier (ie \"keyup\" or \"keypress\") then we should\n            // reset all sequences that were not matched by this event\n            //\n            // this is so, for example, if you have the sequence \"h a t\" and you\n            // type \"h e a r t\" it does not match.  in this case the \"e\" will\n            // cause the sequence to reset\n            //\n            // modifier keys are ignored because you can have a sequence\n            // that contains modifiers such as \"enter ctrl+space\" and in most\n            // cases the modifier key will be pressed before the next key\n            //\n            // also if you have a sequence such as \"ctrl+b a\" then pressing the\n            // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n            //\n            // the \"keydown\" is expected when there is a modifier, but the\n            // \"keypress\" ends up matching the _nextExpectedAction since it occurs\n            // after and that causes the sequence to reset\n            //\n            // we ignore keypresses in a sequence that directly follow a keydown\n            // for the same character\n            var ignoreThisKeypress = e.type == 'keypress' && _ignoreNextKeypress;\n            if (e.type == _nextExpectedAction && !_isModifier(character) && !ignoreThisKeypress) {\n                _resetSequences(doNotReset);\n            }\n\n            _ignoreNextKeypress = processedSequenceCallback && e.type == 'keydown';\n        };\n\n        /**\n         * handles a keydown event\n         *\n         * @param {Event} e\n         * @returns void\n         */\n        function _handleKeyEvent(e) {\n\n            // normalize e.which for key events\n            // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n            if (typeof e.which !== 'number') {\n                e.which = e.keyCode;\n            }\n\n            var character = _characterFromEvent(e);\n\n            // no character found then stop\n            if (!character) {\n                return;\n            }\n\n            // need to use === for the character check because the character can be 0\n            if (e.type == 'keyup' && _ignoreNextKeyup === character) {\n                _ignoreNextKeyup = false;\n                return;\n            }\n\n            self.handleKey(character, _eventModifiers(e), e);\n        }\n\n        /**\n         * called to set a 1 second timeout on the specified sequence\n         *\n         * this is so after each key press in the sequence you have 1 second\n         * to press the next key before you have to start over\n         *\n         * @returns void\n         */\n        function _resetSequenceTimer() {\n            clearTimeout(_resetTimer);\n            _resetTimer = setTimeout(_resetSequences, 1000);\n        }\n\n        /**\n         * binds a key sequence to an event\n         *\n         * @param {string} combo - combo specified in bind call\n         * @param {Array} keys\n         * @param {Function} callback\n         * @param {string=} action\n         * @returns void\n         */\n        function _bindSequence(combo, keys, callback, action) {\n\n            // start off by adding a sequence level record for this combination\n            // and setting the level to 0\n            _sequenceLevels[combo] = 0;\n\n            /**\n             * callback to increase the sequence level for this sequence and reset\n             * all other sequences that were active\n             *\n             * @param {string} nextAction\n             * @returns {Function}\n             */\n            function _increaseSequence(nextAction) {\n                return function() {\n                    _nextExpectedAction = nextAction;\n                    ++_sequenceLevels[combo];\n                    _resetSequenceTimer();\n                };\n            }\n\n            /**\n             * wraps the specified callback inside of another function in order\n             * to reset all sequence counters as soon as this sequence is done\n             *\n             * @param {Event} e\n             * @returns void\n             */\n            function _callbackAndReset(e) {\n                _fireCallback(callback, e, combo);\n\n                // we should ignore the next key up if the action is key down\n                // or keypress.  this is so if you finish a sequence and\n                // release the key the final key will not trigger a keyup\n                if (action !== 'keyup') {\n                    _ignoreNextKeyup = _characterFromEvent(e);\n                }\n\n                // weird race condition if a sequence ends with the key\n                // another sequence begins with\n                setTimeout(_resetSequences, 10);\n            }\n\n            // loop through keys one at a time and bind the appropriate callback\n            // function.  for any key leading up to the final one it should\n            // increase the sequence. after the final, it should reset all sequences\n            //\n            // if an action is specified in the original bind call then that will\n            // be used throughout.  otherwise we will pass the action that the\n            // next key in the sequence should match.  this allows a sequence\n            // to mix and match keypress and keydown events depending on which\n            // ones are better suited to the key provided\n            for (var i = 0; i < keys.length; ++i) {\n                var isFinal = i + 1 === keys.length;\n                var wrappedCallback = isFinal ? _callbackAndReset : _increaseSequence(action || _getKeyInfo(keys[i + 1]).action);\n                _bindSingle(keys[i], wrappedCallback, action, combo, i);\n            }\n        }\n\n        /**\n         * binds a single keyboard combination\n         *\n         * @param {string} combination\n         * @param {Function} callback\n         * @param {string=} action\n         * @param {string=} sequenceName - name of sequence if part of sequence\n         * @param {number=} level - what part of the sequence the command is\n         * @returns void\n         */\n        function _bindSingle(combination, callback, action, sequenceName, level) {\n\n            // store a direct mapped reference for use with Mousetrap.trigger\n            self._directMap[combination + ':' + action] = callback;\n\n            // make sure multiple spaces in a row become a single space\n            combination = combination.replace(/\\s+/g, ' ');\n\n            var sequence = combination.split(' ');\n            var info;\n\n            // if this pattern is a sequence of keys then run through this method\n            // to reprocess each pattern one key at a time\n            if (sequence.length > 1) {\n                _bindSequence(combination, sequence, callback, action);\n                return;\n            }\n\n            info = _getKeyInfo(combination, action);\n\n            // make sure to initialize array if this is the first time\n            // a callback is added for this key\n            self._callbacks[info.key] = self._callbacks[info.key] || [];\n\n            // remove an existing match if there is one\n            _getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level);\n\n            // add this call back to the array\n            // if it is a sequence put it at the beginning\n            // if not put it at the end\n            //\n            // this is important because the way these are processed expects\n            // the sequence ones to come first\n            self._callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n                callback: callback,\n                modifiers: info.modifiers,\n                action: info.action,\n                seq: sequenceName,\n                level: level,\n                combo: combination\n            });\n        }\n\n        /**\n         * binds multiple combinations to the same callback\n         *\n         * @param {Array} combinations\n         * @param {Function} callback\n         * @param {string|undefined} action\n         * @returns void\n         */\n        self._bindMultiple = function(combinations, callback, action) {\n            for (var i = 0; i < combinations.length; ++i) {\n                _bindSingle(combinations[i], callback, action);\n            }\n        };\n\n        // start!\n        _addEvent(targetElement, 'keypress', _handleKeyEvent);\n        _addEvent(targetElement, 'keydown', _handleKeyEvent);\n        _addEvent(targetElement, 'keyup', _handleKeyEvent);\n    }\n\n    /**\n     * binds an event to mousetrap\n     *\n     * can be a single key, a combination of keys separated with +,\n     * an array of keys, or a sequence of keys separated by spaces\n     *\n     * be sure to list the modifier keys first to make sure that the\n     * correct key ends up getting bound (the last key in the pattern)\n     *\n     * @param {string|Array} keys\n     * @param {Function} callback\n     * @param {string=} action - 'keypress', 'keydown', or 'keyup'\n     * @returns void\n     */\n    Mousetrap.prototype.bind = function(keys, callback, action) {\n        var self = this;\n        keys = keys instanceof Array ? keys : [keys];\n        self._bindMultiple.call(self, keys, callback, action);\n        return self;\n    };\n\n    /**\n     * unbinds an event to mousetrap\n     *\n     * the unbinding sets the callback function of the specified key combo\n     * to an empty function and deletes the corresponding key in the\n     * _directMap dict.\n     *\n     * TODO: actually remove this from the _callbacks dictionary instead\n     * of binding an empty function\n     *\n     * the keycombo+action has to be exactly the same as\n     * it was defined in the bind method\n     *\n     * @param {string|Array} keys\n     * @param {string} action\n     * @returns void\n     */\n    Mousetrap.prototype.unbind = function(keys, action) {\n        var self = this;\n        return self.bind.call(self, keys, function() {}, action);\n    };\n\n    /**\n     * triggers an event that has already been bound\n     *\n     * @param {string} keys\n     * @param {string=} action\n     * @returns void\n     */\n    Mousetrap.prototype.trigger = function(keys, action) {\n        var self = this;\n        if (self._directMap[keys + ':' + action]) {\n            self._directMap[keys + ':' + action]({}, keys);\n        }\n        return self;\n    };\n\n    /**\n     * resets the library back to its initial state.  this is useful\n     * if you want to clear out the current keyboard shortcuts and bind\n     * new ones - for example if you switch to another page\n     *\n     * @returns void\n     */\n    Mousetrap.prototype.reset = function() {\n        var self = this;\n        self._callbacks = {};\n        self._directMap = {};\n        return self;\n    };\n\n    /**\n     * should we stop this event before firing off callbacks\n     *\n     * @param {Event} e\n     * @param {Element} element\n     * @return {boolean}\n     */\n    Mousetrap.prototype.stopCallback = function(e, element) {\n        var self = this;\n\n        // if the element has the class \"mousetrap\" then no need to stop\n        if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {\n            return false;\n        }\n\n        if (_belongsTo(element, self.target)) {\n            return false;\n        }\n\n        // stop for input, select, and textarea\n        return element.tagName == 'INPUT' || element.tagName == 'SELECT' || element.tagName == 'TEXTAREA' || element.isContentEditable;\n    };\n\n    /**\n     * exposes _handleKey publicly so it can be overwritten by extensions\n     */\n    Mousetrap.prototype.handleKey = function() {\n        var self = this;\n        return self._handleKey.apply(self, arguments);\n    };\n\n    /**\n     * allow custom key mappings\n     */\n    Mousetrap.addKeycodes = function(object) {\n        for (var key in object) {\n            if (object.hasOwnProperty(key)) {\n                _MAP[key] = object[key];\n            }\n        }\n        _REVERSE_MAP = null;\n    };\n\n    /**\n     * Init the global mousetrap functions\n     *\n     * This method is needed to allow the global mousetrap functions to work\n     * now that mousetrap is a constructor function.\n     */\n    Mousetrap.init = function() {\n        var documentMousetrap = Mousetrap(document);\n        for (var method in documentMousetrap) {\n            if (method.charAt(0) !== '_') {\n                Mousetrap[method] = (function(method) {\n                    return function() {\n                        return documentMousetrap[method].apply(documentMousetrap, arguments);\n                    };\n                } (method));\n            }\n        }\n    };\n\n    Mousetrap.init();\n\n    // expose mousetrap to the global object\n    window.Mousetrap = Mousetrap;\n\n    // expose as a common js module\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Mousetrap;\n    }\n\n    // expose mousetrap as an AMD module\n    if (typeof define === 'function' && define.amd) {\n        define(function() {\n            return Mousetrap;\n        });\n    }\n}) (typeof window !== 'undefined' ? window : null, typeof  window !== 'undefined' ? document : null);\n\n\n\n// WEBPACK FOOTER //\n// ./~/mousetrap/mousetrap.js","var type = require('type-of');\n\nvar jsonpID = 0,\n    document = window.document,\n    key,\n    name,\n    rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,\n    scriptTypeRE = /^(?:text|application)\\/javascript/i,\n    xmlTypeRE = /^(?:text|application)\\/xml/i,\n    jsonType = 'application/json',\n    htmlType = 'text/html',\n    blankRE = /^\\s*$/\n\nvar ajax = module.exports = function(options){\n  var settings = extend({}, options || {})\n  for (key in ajax.settings) if (settings[key] === undefined) settings[key] = ajax.settings[key]\n\n  ajaxStart(settings)\n\n  if (!settings.crossDomain) settings.crossDomain = /^([\\w-]+:)?\\/\\/([^\\/]+)/.test(settings.url) &&\n    RegExp.$2 != window.location.host\n\n  var dataType = settings.dataType, hasPlaceholder = /=\\?/.test(settings.url)\n  if (dataType == 'jsonp' || hasPlaceholder) {\n    if (!hasPlaceholder) settings.url = appendQuery(settings.url, 'callback=?')\n    return ajax.JSONP(settings)\n  }\n\n  if (!settings.url) settings.url = window.location.toString()\n  serializeData(settings)\n\n  var mime = settings.accepts[dataType],\n      baseHeaders = { },\n      protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : window.location.protocol,\n      xhr = ajax.settings.xhr(), abortTimeout\n\n  if (!settings.crossDomain) baseHeaders['X-Requested-With'] = 'XMLHttpRequest'\n  if (mime) {\n    baseHeaders['Accept'] = mime\n    if (mime.indexOf(',') > -1) mime = mime.split(',', 2)[0]\n    xhr.overrideMimeType && xhr.overrideMimeType(mime)\n  }\n  if (settings.contentType || (settings.data && settings.type.toUpperCase() != 'GET'))\n    baseHeaders['Content-Type'] = (settings.contentType || 'application/x-www-form-urlencoded')\n  settings.headers = extend(baseHeaders, settings.headers || {})\n\n  xhr.onreadystatechange = function(){\n    if (xhr.readyState == 4) {\n      clearTimeout(abortTimeout)\n      var result, error = false\n      if ((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304 || (xhr.status == 0 && protocol == 'file:')) {\n        dataType = dataType || mimeToDataType(xhr.getResponseHeader('content-type'))\n        result = xhr.responseText\n\n        try {\n          if (dataType == 'script')    (1,eval)(result)\n          else if (dataType == 'xml')  result = xhr.responseXML\n          else if (dataType == 'json') result = blankRE.test(result) ? null : JSON.parse(result)\n        } catch (e) { error = e }\n\n        if (error) ajaxError(error, 'parsererror', xhr, settings)\n        else ajaxSuccess(result, xhr, settings)\n      } else {\n        ajaxError(null, 'error', xhr, settings)\n      }\n    }\n  }\n\n  var async = 'async' in settings ? settings.async : true\n  xhr.open(settings.type, settings.url, async)\n\n  for (name in settings.headers) xhr.setRequestHeader(name, settings.headers[name])\n\n  if (ajaxBeforeSend(xhr, settings) === false) {\n    xhr.abort()\n    return false\n  }\n\n  if (settings.timeout > 0) abortTimeout = setTimeout(function(){\n      xhr.onreadystatechange = empty\n      xhr.abort()\n      ajaxError(null, 'timeout', xhr, settings)\n    }, settings.timeout)\n\n  // avoid sending empty string (#319)\n  xhr.send(settings.data ? settings.data : null)\n  return xhr\n}\n\n\n// trigger a custom event and return false if it was cancelled\nfunction triggerAndReturn(context, eventName, data) {\n  //todo: Fire off some events\n  //var event = $.Event(eventName)\n  //$(context).trigger(event, data)\n  return true;//!event.defaultPrevented\n}\n\n// trigger an Ajax \"global\" event\nfunction triggerGlobal(settings, context, eventName, data) {\n  if (settings.global) return triggerAndReturn(context || document, eventName, data)\n}\n\n// Number of active Ajax requests\najax.active = 0\n\nfunction ajaxStart(settings) {\n  if (settings.global && ajax.active++ === 0) triggerGlobal(settings, null, 'ajaxStart')\n}\nfunction ajaxStop(settings) {\n  if (settings.global && !(--ajax.active)) triggerGlobal(settings, null, 'ajaxStop')\n}\n\n// triggers an extra global event \"ajaxBeforeSend\" that's like \"ajaxSend\" but cancelable\nfunction ajaxBeforeSend(xhr, settings) {\n  var context = settings.context\n  if (settings.beforeSend.call(context, xhr, settings) === false ||\n      triggerGlobal(settings, context, 'ajaxBeforeSend', [xhr, settings]) === false)\n    return false\n\n  triggerGlobal(settings, context, 'ajaxSend', [xhr, settings])\n}\nfunction ajaxSuccess(data, xhr, settings) {\n  var context = settings.context, status = 'success'\n  settings.success.call(context, data, status, xhr)\n  triggerGlobal(settings, context, 'ajaxSuccess', [xhr, settings, data])\n  ajaxComplete(status, xhr, settings)\n}\n// type: \"timeout\", \"error\", \"abort\", \"parsererror\"\nfunction ajaxError(error, type, xhr, settings) {\n  var context = settings.context\n  settings.error.call(context, xhr, type, error)\n  triggerGlobal(settings, context, 'ajaxError', [xhr, settings, error])\n  ajaxComplete(type, xhr, settings)\n}\n// status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\nfunction ajaxComplete(status, xhr, settings) {\n  var context = settings.context\n  settings.complete.call(context, xhr, status)\n  triggerGlobal(settings, context, 'ajaxComplete', [xhr, settings])\n  ajaxStop(settings)\n}\n\n// Empty function, used as default callback\nfunction empty() {}\n\najax.JSONP = function(options){\n  if (!('type' in options)) return ajax(options)\n\n  var callbackName = 'jsonp' + (++jsonpID),\n    script = document.createElement('script'),\n    abort = function(){\n      //todo: remove script\n      //$(script).remove()\n      if (callbackName in window) window[callbackName] = empty\n      ajaxComplete('abort', xhr, options)\n    },\n    xhr = { abort: abort }, abortTimeout,\n    head = document.getElementsByTagName(\"head\")[0]\n      || document.documentElement\n\n  if (options.error) script.onerror = function() {\n    xhr.abort()\n    options.error()\n  }\n\n  window[callbackName] = function(data){\n    clearTimeout(abortTimeout)\n      //todo: remove script\n      //$(script).remove()\n    delete window[callbackName]\n    ajaxSuccess(data, xhr, options)\n  }\n\n  serializeData(options)\n  script.src = options.url.replace(/=\\?/, '=' + callbackName)\n\n  // Use insertBefore instead of appendChild to circumvent an IE6 bug.\n  // This arises when a base node is used (see jQuery bugs #2709 and #4378).\n  head.insertBefore(script, head.firstChild);\n\n  if (options.timeout > 0) abortTimeout = setTimeout(function(){\n      xhr.abort()\n      ajaxComplete('timeout', xhr, options)\n    }, options.timeout)\n\n  return xhr\n}\n\najax.settings = {\n  // Default type of request\n  type: 'GET',\n  // Callback that is executed before request\n  beforeSend: empty,\n  // Callback that is executed if the request succeeds\n  success: empty,\n  // Callback that is executed the the server drops error\n  error: empty,\n  // Callback that is executed on request complete (both: error and success)\n  complete: empty,\n  // The context for the callbacks\n  context: null,\n  // Whether to trigger \"global\" Ajax events\n  global: true,\n  // Transport\n  xhr: function () {\n    return new window.XMLHttpRequest()\n  },\n  // MIME types mapping\n  accepts: {\n    script: 'text/javascript, application/javascript',\n    json:   jsonType,\n    xml:    'application/xml, text/xml',\n    html:   htmlType,\n    text:   'text/plain'\n  },\n  // Whether the request is to another domain\n  crossDomain: false,\n  // Default timeout\n  timeout: 0\n}\n\nfunction mimeToDataType(mime) {\n  return mime && ( mime == htmlType ? 'html' :\n    mime == jsonType ? 'json' :\n    scriptTypeRE.test(mime) ? 'script' :\n    xmlTypeRE.test(mime) && 'xml' ) || 'text'\n}\n\nfunction appendQuery(url, query) {\n  return (url + '&' + query).replace(/[&?]{1,2}/, '?')\n}\n\n// serialize payload and append it to the URL for GET requests\nfunction serializeData(options) {\n  if (type(options.data) === 'object') options.data = param(options.data)\n  if (options.data && (!options.type || options.type.toUpperCase() == 'GET'))\n    options.url = appendQuery(options.url, options.data)\n}\n\najax.get = function(url, success){ return ajax({ url: url, success: success }) }\n\najax.post = function(url, data, success, dataType){\n  if (type(data) === 'function') dataType = dataType || success, success = data, data = null\n  return ajax({ type: 'POST', url: url, data: data, success: success, dataType: dataType })\n}\n\najax.getJSON = function(url, success){\n  return ajax({ url: url, success: success, dataType: 'json' })\n}\n\nvar escape = encodeURIComponent\n\nfunction serialize(params, obj, traditional, scope){\n  var array = type(obj) === 'array';\n  for (var key in obj) {\n    var value = obj[key];\n\n    if (scope) key = traditional ? scope : scope + '[' + (array ? '' : key) + ']'\n    // handle data in serializeArray() format\n    if (!scope && array) params.add(value.name, value.value)\n    // recurse into nested objects\n    else if (traditional ? (type(value) === 'array') : (type(value) === 'object'))\n      serialize(params, value, traditional, key)\n    else params.add(key, value)\n  }\n}\n\nfunction param(obj, traditional){\n  var params = []\n  params.add = function(k, v){ this.push(escape(k) + '=' + escape(v)) }\n  serialize(params, obj, traditional)\n  return params.join('&').replace('%20', '+')\n}\n\nfunction extend(target) {\n  var slice = Array.prototype.slice;\n  slice.call(arguments, 1).forEach(function(source) {\n    for (key in source)\n      if (source[key] !== undefined)\n        target[key] = source[key]\n  })\n  return target\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/packing-ajax/index.js","var toString = Object.prototype.toString\r\n\r\nmodule.exports = function(val){\r\n  switch (toString.call(val)) {\r\n    case '[object Function]': return 'function'\r\n    case '[object Date]': return 'date'\r\n    case '[object RegExp]': return 'regexp'\r\n    case '[object Arguments]': return 'arguments'\r\n    case '[object Array]': return 'array'\r\n    case '[object String]': return 'string'\r\n  }\r\n\r\n  if (typeof val == 'object' && val && typeof val.length == 'number') {\r\n    try {\r\n      if (typeof val.callee == 'function') return 'arguments';\r\n    } catch (ex) {\r\n      if (ex instanceof TypeError) {\r\n        return 'arguments';\r\n      }\r\n    }\r\n  }\r\n\r\n  if (val === null) return 'null'\r\n  if (val === undefined) return 'undefined'\r\n  if (val && val.nodeType === 1) return 'element'\r\n  if (val === Object(val)) return 'object'\r\n\r\n  return typeof val\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/type-of/index.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\r\n * Copyright (C) 2017 Luke Denton\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU General Public License as published by\r\n * the Free Software Foundation; either version 3 of the License, or\r\n * (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\nimport ajax from 'packing-ajax'\r\n\r\n/**\r\n * Class AJAX\r\n *\r\n * Abstraction of all AJAX interactions\r\n */\r\nexport default class AJAX {\r\n\r\n    /**\r\n     * Class constructor\r\n     *\r\n     * @returns {null}\r\n     */\r\n    constructor() {\r\n        this.baseUrl = 'https://api.pinterest.com/';\r\n        this.apiVersion = 'v1/';\r\n    }\r\n\r\n    /**\r\n     * Build the URL of the appropriate API being called\r\n     *\r\n     * @param {string}  endpoint The API endpoint being queried\r\n     *\r\n     * @returns {string}\r\n     * @private\r\n     */\r\n    _buildUrl(endpoint) {\r\n        return this.baseUrl + this.apiVersion + endpoint;\r\n    }\r\n\r\n    /**\r\n     * Execute the API query\r\n     *\r\n     * @param {string} endpoint The API endpoint to be queried\r\n     * @param {Object} data     Any additional data required\r\n     * @param {string} type     The type of request being made. E.g. GET, POST etc\r\n     *\r\n     * @returns {Promise}\r\n     * @private\r\n     */\r\n    _fetch(endpoint, data, type) {\r\n        return new Promise((resolve, reject) => {\r\n            const url = this._buildUrl(endpoint);\r\n\r\n            ajax({\r\n                url: url,\r\n                type: type,\r\n                dataType: 'json',\r\n                data: data,\r\n                success: (response) => {\r\n                    resolve(response);\r\n                },\r\n                error: (response) => {\r\n                    reject(response);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Helper function for performing a GET request\r\n     *\r\n     * @param {string} endpoint The API endpoint to be queried\r\n     * @param {Object} data     Additional data to be sent with the request\r\n     *\r\n     * @returns {Promise}\r\n     */\r\n    static Get(endpoint, data) {\r\n        return new Promise((resolve, reject) => {\r\n            const ajax = new AJAX();\r\n            ajax._fetch(endpoint, data, 'GET')\r\n                .then(resolve)\r\n                .catch(reject);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Helper function for performing a POST request\r\n     *\r\n     * @param {string} endpoint The API endpoint to be queried\r\n     * @param {Object} data     Additional data to be sent with the request\r\n     *\r\n     * @returns {Promise}\r\n     */\r\n    static Post(endpoint, data) {\r\n        return new Promise((resolve, reject) => {\r\n            const ajax = new AJAX();\r\n            ajax._fetch(endpoint, data, 'POST')\r\n                .then(resolve)\r\n                .catch(reject);\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/services/AJAX.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\r\n * Copyright (C) 2017 Luke Denton\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU General Public License as published by\r\n * the Free Software Foundation; either version 3 of the License, or\r\n * (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\n\r\n/**\r\n * Class ErrorUtil\r\n *\r\n * Interface for abstracting the error reporting service\r\n */\r\nexport default class ErrorUtil {\r\n\r\n    /**\r\n     * Log an error to the bug tracking system\r\n     *\r\n     * @param {Error}  error   A description of the error\r\n     * @param {Object} options Extra details of the error\r\n     *\r\n     * @returns {null}\r\n     */\r\n    static Log(error, options) {\r\n        if (window.location.origin === 'https://bulkpinner.github.io') {\r\n            Bugsnag.notifyException(error, options);\r\n        } else {\r\n            console.error(error);\r\n            console.error(options);\r\n        }\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/services/ErrorUtil.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\n * Copyright (C) 2017 Luke Denton\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport CustomEvent from 'services/CustomEvent';\nimport API from 'services/API';\nimport DataStore from 'services/DataStore';\n\n/**\n * Class Authorization\n */\nexport default class Authorization {\n\n    constructor() {\n        this.authenticationContainer = document.querySelector(\".authentication-container\");\n        this.authenticationButton    = document.querySelector(\".authenticate-button\");\n\n        // Listen for the instruction that the user isn't authenticated yet\n        CustomEvent.on('user-not-authenticated', () => {\n            this.init();\n        });\n    }\n\n    /**\n     * Initialise the authorization section of the application\n     *\n     * @returns {null}\n     */\n    init() {\n        this.showAuthenticationContainer();\n        this.attachListeners();\n    }\n\n    /**\n     * @returns {null}\n     */\n    showAuthenticationContainer() {\n        this.authenticationContainer.classList.toggle('hidden', false);\n        CustomEvent.trigger('authentication-shown');\n    }\n\n    /**\n     * @returns {null}\n     */\n    hideAuthenticationContainer() {\n        this.authenticationContainer.classList.toggle('hidden', true);\n        CustomEvent.trigger('authentication-hidden');\n    }\n\n    /**\n     * Attach event listeners\n     *\n     * @returns {null}\n     */\n    attachListeners() {\n        this.authenticationButton.addEventListener('click', () => {\n            API.Login()\n            .then(({accessToken}) => {\n                DataStore.Set(DataStore.DATA__ACCESS_TOKEN(), accessToken);\n                CustomEvent.trigger('user-authenticated');\n            })\n            .catch((response) => {\n                console.error(response);\n            });\n        });\n\n        // Make sure the authentication container is hidden if the application container gets shown\n        CustomEvent.on('user-authenticated', e => {\n            this.hideAuthenticationContainer();\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/views/Authorization.js"],"sourceRoot":""}